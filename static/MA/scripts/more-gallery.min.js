var HOTWHEELS=HOTWHEELS||{};HOTWHEELS.GalleryCarousels=function(t){"use strict";var e=function(){var e=!0,i=116,n=8,s=(t("html").hasClass("touch"),window.innerWidth,t(window).width()),o=768,r=!0,a=[],l=t(".mod-gallery .thumbs");t.each(l,function(l){var d=t(this),c={minSlides:1,maxSlides:12,slideMargin:n,slideWidth:i,controls:e,pager:!1,infiniteLoop:!1,hideControlOnEnd:!0,moveSlides:1,speed:300,prevText:'<span class="icons icon-arrow-left"></span>',nextText:'<span class="icons icon-arrow-right"></span>'};t(window).resize(function(){s=t(window).width(),s>=o&&a.length>0?(t.each(a,function(){a[l].destroySlider()}),a=[],r=!0):o>s&&a.length==0&&(r=!1,a[l]=d.bxSlider(c))}),o>s&&(a[l]=t(this).bxSlider(c))})};return{init:e}}(jQuery,void 0)
;(function(e){"use strict";function i(){var i,t=[];e.each(e("section.mod-gallery"),function(){i=new s(e(this).attr("id")),t.push(i)})}function t(){return 980>window.innerWidth?768>window.innerWidth?1:2:3}function a(){return 980>window.innerWidth?768>window.innerWidth?[288,162]:[496,279]:[640,360]}var s=function(i){var s=this;this.index=0,this.gallery=e("#"+i),this.$slides=this.gallery.find(".slide"),this.$captions=this.gallery.find(".caption .more"),this.$thumbRow=e("ul#gallery-thumbs"),this.srcsArray=[],e.each(this.$slides,function(i){if(s.srcsArray.push(e(this).find(".item").data("src").slice(1,-1).split(",")),s.$slides.length>1){var t='<li class="thumb-wrap ';s.srcsArray[i].length===2&&(t+="video"),t+='"><a href="#"><img src="'+s.srcsArray[i][0]+'" alt="" class="thumb ',i==0&&(t+="active"),t+='"></a></li>',s.$thumbRow.append(t)}}),s.$slides.length>1?HOTWHEELS.GalleryCarousels.init():e("div.more-btns a").hide();var n=this.$slides.eq(0).find(".item"),r=n.find(".wrap");if(window.innerWidth,s.srcsArray[0].length===2){var o=s.srcsArray[0][1],l=a()[0],c=a()[1];r.append('<object width="'+l+'" height="'+c+'"><param name="movie" value="http://www.youtube.com/v/'+o+'=en_US&version=3&rel=0"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/'+o+'?hl=en_US&version=3&rel=0" type="application/x-shockwave-flash" width="'+l+'" height="'+c+'" allowscriptaccess="always" allowfullscreen="true"></embed></object>')}else r.append('<img src="'+s.srcsArray[0][t()]+'">'),s.srcsArray[0][4]&&r.find("img").css("cursor","pointer").on("click",function(){window.location=s.srcsArray[0][4]});window.setTimeout(function(){s.$slides.eq(0).find(".caption").height()>22&&s.$slides.eq(0).find(".caption").addClass("long")},500),this.$thumbs=this.gallery.find(".thumbs li"),this.$thumbs.on("click",function(i){i.preventDefault(),s.move(s.$thumbs.index(e(this)))}),this.$next=e(".gallery-next"),this.$next.on("click",function(e){e.preventDefault(),s.move(s.index+1)}),this.$prev=e(".gallery-prev"),this.$prev.on("click",function(e){e.preventDefault(),s.move(s.index-1)});var l=(this.$slides,this.index,this.$slides.eq(0).width());this.$captions.on("click",function(i){i.preventDefault(),e(this).parent(".caption").toggleClass("active");var t=e(this).find("span"),a=e(this).data("less"),s=e(this).data("more");t.html()==s?t.html(a):t.html(s)})};s.prototype.move=function(e){var i=this,s=i.index,n=i.$slides,r=i.$thumbRow.find(".thumb"),o=n.eq(e).find(".item"),l=(o.data("src"),o.find(".wrap"));if(i.srcsArray[s].length===2&&n.eq(s).find(".wrap").empty(),i.srcsArray[e].length===2){var c=i.srcsArray[e][1],d=a()[0],h=a()[1],u='<object width="'+d+'" height="'+h+'"><param name="movie" value="http://www.youtube.com/v/'+c+'=en_US&version=3&rel=0"><param name="allowFullScreen" value="true"><param name="allowscriptaccess" value="always"><embed src="http://www.youtube.com/v/'+c+'?hl=en_US&version=3&rel=0" type="application/x-shockwave-flash" width="'+d+'" height="'+h+'" allowscriptaccess="always" allowfullscreen="true"></object>';l.append(u)}else{var u='<img src="'+i.srcsArray[e][t()]+'">';l.html()!==u&&l.empty().append('<img src="'+i.srcsArray[e][t()]+'">'),i.srcsArray[e][4]&&l.find("img").css("cursor","pointer").on("click",function(){window.location=i.srcsArray[e][4]})}for(var p=0;e>p;p++)n.eq(p).addClass("before").removeClass("active");n.eq(e).removeClass("before").addClass("active");for(var v=e+1;n.length>v;v++)n.eq(v).removeClass("before active");window.setTimeout(function(){o.find(".caption").height()>22&&o.find(".caption").addClass("long")},500),r.eq(s).removeClass("active"),r.eq(e).addClass("active"),i.index=e},i()})(jQuery,void 0)